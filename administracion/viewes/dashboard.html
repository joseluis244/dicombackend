<style>
    .desenfoque{
        filter: blur(8px);
    }
    .EsperaCarga{
        position: fixed;
        top: 0px;
        left: 0px;
        right: 0px;
        bottom: 0px;
        background-color: #ffffffb4;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .Spinner{
        width: 60px;
        height: 60px;
        border: 15px solid black;
        border-bottom: 15px solid #8d0000;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
<body>
    <div id="DashboardMain" style="overflow-x: hidden;" class="desenfoque">

        <!--///////////////////////////////////////-->
        <!--///////////////////////////////////////-->
        <div class="row">
            <div class="col-sm-12 col-md-4">
                <div class="TituloGrafica">Datos generales:</div>
                <div style="display: flex; flex-direction: column; justify-content: center; height: calc(100% - 25px);">
                    <div>Cantidad de estudios: <span id="CantidadDeEstudios"></span> </div>
                    <div>Discoduro Usado:<span id="DiscoUsado"></span>%</div>
                    <div class="progress">
                        <div id="progressbarDisk" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-4">
                <div class="TituloGrafica">Estudios por Modalidad (Dia)</div>
                <div>
                    <canvas id="myChart12"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-md-4">
                <div class="TituloGrafica">Estudios por Maquina (Dia)</div>
                <div>
                    <canvas id="myChart13"></canvas>
                </div>
            </div>
        </div>
        <!--///////////////////////////////////////-->
        <div class="row">
            <div class="col-sm-12 col-md-4">
                <div class="TituloGrafica">Estudios por Modalidad/Estudio (Mes)</div>
                <div>
                    <canvas id="myChart21"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-md-4">
                <div class="TituloGrafica">Estudios por Modalidad (Mes)</div>
                <div>
                    <canvas id="myChart22"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-md-4">
                <div class="TituloGrafica">Estudios por Maquina (Mes)</div>
                <div>
                    <canvas id="myChart23"></canvas>
                </div>
            </div>
        </div>
        <!--///////////////////////////////////////-->

                <div class="TituloGrafica">Historico pacientes 24 meses</div>
                <div style="height: 500px;">
                    <canvas width=500 id="myChart31"></canvas>
                </div>

        <!--///////////////////////////////////////-->
    </div>
    <div class="EsperaCarga">
        <div class="Spinner"></div>
    </div>
    <script>
        async function main(){
            let req = await fetch("/administracion/estadisticas")
            let res = await req.json()
            $("#DashboardMain").removeClass("desenfoque")
            $(".EsperaCarga").fadeOut(1000);
            $("#CantidadDeEstudios").html(res.CantidadEstudios)
            $("#DiscoUsado").html(res.UsoDisco.toFixed(2))
            $("#progressbarDisk").width(`${res.UsoDisco.toFixed(2)}%`)
            console.log(res)
        }
        main()
    </script>
</body>